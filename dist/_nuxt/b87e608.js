(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{290:function(e,t,r){"use strict";(function(e){var n=r(12);r(46),r(87),r(207),r(47),r(20),r(114),r(206);t.a={data:function(){return{isSubscribed:!1}},mounted:function(){this.checkSubscription();var script=document.createElement("script");script.src="https://www.paypal.com/sdk/js?client-id=".concat(e.env.PAYPAL_CLIENT_ID,"&currency=MXN"),script.addEventListener("load",this.renderPayPalButton),document.body.appendChild(script)},methods:{checkSubscription:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=document.cookie.split(";").find((function(e){return e.trim().startsWith("email=")})))){r.next=17;break}return o=n.split("=")[1],r.prev=3,r.next=6,fetch("".concat(e.env.API_URL,"/api/user?email=").concat(o));case 6:if(!(c=r.sent).ok){r.next=12;break}return r.next=10,c.json();case 10:l=r.sent,t.isSubscribed=l.isSubscribed;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(3),console.error("Error al obtener la información del usuario:",r.t0);case 17:case"end":return r.stop()}}),r,null,[[3,14]])})))()},renderPayPalButton:function(){var t,r=this;window.paypal?window.paypal.Buttons({createOrder:function(data,e){return e.order.create({purchase_units:[{amount:{value:"49.00"}}]})},onApprove:(t=Object(n.a)(regeneratorRuntime.mark((function t(data,n){var o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.order.capture();case 3:if(o=t.sent,c=document.cookie.split(";").find((function(e){return e.trim().startsWith("email=")})),!(l=c?c.split("=")[1]:null)){t.next=12;break}return t.next=9,fetch("".concat(e.env.API_URL,"/api/update-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,isSubscribed:!0})});case 9:if(t.sent.ok){t.next=12;break}throw new Error("Error al actualizar la suscripción");case 12:alert("Transacción completada por "+o.payer.name.given_name),r.$router.push("/success"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.error("Error en el proceso de pago:",t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])}))),function(e,r){return t.apply(this,arguments)}),onError:function(e){console.error("Error en el proceso de pago:",e)}}).render("#paypal-button-container"):console.error("PayPal SDK no está cargado.")},cancelSubscription:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n=document.cookie.split(";").find((function(e){return e.trim().startsWith("email=")})),!(o=n?n.split("=")[1]:null)){r.next=13;break}return r.next=6,fetch("".concat(e.env.API_URL,"/api/update-subscription"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,isSubscribed:!1})});case 6:if(r.sent.ok){r.next=9;break}throw new Error("Error al cancelar la suscripción");case 9:alert("Suscripción cancelada con éxito"),t.$router.push("/cancel"),r.next=14;break;case 13:alert("No se encontró un correo electrónico en las cookies");case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(0),console.error("Error en el proceso de cancelación:",r.t0);case 19:case"end":return r.stop()}}),r,null,[[0,16]])})))()}}}}).call(this,r(148))},304:function(e,t,r){var content=r(319);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(86).default)("afbfaa56",content,!0,{sourceMap:!1})},318:function(e,t,r){"use strict";r(304)},319:function(e,t,r){var n=r(85)((function(i){return i[1]}));n.push([e.i,'body[data-v-551fe2a0]{font-family:"Inter",sans-serif}h2[data-v-551fe2a0]{color:#1f2937;font-size:1.25rem}h3[data-v-551fe2a0]{color:#374151;font-size:1rem}.bg-white[data-v-551fe2a0]{background-color:#fff}#paypal-button-container[data-v-551fe2a0]{display:flex;justify-content:center;z-index:10}.bg-gray-100[data-v-551fe2a0]{padding:.5rem}.space-y-6>*+*[data-v-551fe2a0]{margin-top:1.5rem}.flex[data-v-551fe2a0]{margin-top:1rem}.menu[data-v-551fe2a0]{z-index:50}',""]),n.locals={},e.exports=n},360:function(e,t,r){"use strict";r.r(t);var n=r(290).a,o=(r(318),r(32)),component=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative z-0 bg-white max-w-sm mx-auto py-6 px-2 sm:px-4 lg:px-6"},[t("div",{staticClass:"space-y-6"},[e._m(0),e._v(" "),t("div",{staticClass:"bg-gray-100 py-4 px-2 shadow sm:rounded-lg sm:px-6"},[t("h3",{staticClass:"text-lg font-medium text-gray-700 text-center mb-4"},[e._v("Métodos de Pago")]),e._v(" "),t("div",{staticClass:"mt-2 relative",attrs:{id:"paypal-button-container"}}),e._v(" "),e.isSubscribed?t("button",{staticClass:"mt-4 w-full rounded-md bg-red-400 px-3 py-2 text-center text-xs font-semibold text-white shadow-sm hover:bg-red-500",on:{click:e.cancelSubscription}},[e._v("\n        Cancelar Suscripción\n      ")]):e._e()])])])}),[function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"text-center text-2xl font-semibold text-gray-900"},[e._v("Suscríbete por solo $49")]),e._v(" "),t("p",{staticClass:"mt-1 text-center text-xs text-gray-600"},[e._v("\n        Elige el método de pago y accede a contenido exclusivo.\n      ")])])}],!1,null,"551fe2a0",null);t.default=component.exports}}]);